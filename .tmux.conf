# ===========================
# General
# ===========================
set -g default-terminal "tmux-256color"
set -g mouse on
set -g history-limit 10000
setw -g mode-keys vi

# Local prefix
unbind C-b
set -g prefix C-a
bind C-a send-prefix

# Forward Ctrl-B to inner tmux (server)
bind-key -n C-b send-keys C-b

# Force fish as login shell
set-option -g default-shell /opt/homebrew/bin/fish

# Easier window switching
bind -n M-Left previous-window
bind -n M-Right next-window

# Start windows and panes in current directory
bind c new-window -c "#{pane_current_path}"
bind '"' split-window -v -c "#{pane_current_path}"
bind % split-window -h -c "#{pane_current_path}"

# ===========================
# Status Bar
# ===========================
set -g status on
set -g status-interval 2
set -g status-justify left
set -g status-left-length 20
set -g status-right-length 40
set -g status-bg "#1f1f28"
set -g status-fg "#dcd7ba"

# Minimal session indicator with Nerd Font icon
set -g status-left "#[fg=#1f1f28,bg=#7fbbb3]#[fg=#1f1f28,bg=#7fbbb3] ⬢ #S #[fg=#7fbbb3,bg=#1f1f28]"

# Minimal time display
set -g status-right "#[fg=#1f1f28,bg=#81a2be]#[fg=#dcd7ba,bg=#81a2be] %H:%M #[fg=#81a2be,bg=#1f1f28]"

# ===========================
# Window Status
# ===========================
setw -g window-status-format "#[fg=#9fb28f,bg=#1f1f28] #I:#W "
setw -g window-status-current-format "#[fg=#1f1f28,bg=#7fbbb3] #[fg=#1f1f28,bg=#7fbbb3]#I:#W #[fg=#7fbbb3,bg=#1f1f28]"

# ===========================
# Pane Borders (tmux ≥3.2)
# ===========================
set -g pane-border-style fg=#3a3a3a
set -g pane-active-border-style fg=#7fbbb3

# ===========================
# Message Style
# ===========================
set -g message-style fg=#dcd7ba,bg=#1f1f28

# ===========================
# Plugins via TPM
# ===========================
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'

# Initialize TPM (keep at bottom)
run '~/.tmux/plugins/tpm/tpm'

